<div class="card">
  <p-table [value]="agents" [lazy]="true">
    <ng-template pTemplate="caption">
      <h5 class="mb-4">Agent Table</h5>
      <div class="input-group no-border">
        <input type="text" value="" placeholder="Search..." class="form-control" #searchInput
          (keydown)="search(searchInput)">
      </div>
    </ng-template>
    <ng-template pTemplate="header">
      <tr>
        <th>#</th>
        <th>Name</th>
        <th>team</th>
        <th>Role</th>
        <th>status</th>
        <th>permissions</th>
        <th>Action</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-user let-rowIndex="rowIndex">
      <tr>
        <td>{{rowIndex + 1}}</td>
        <td>{{user.name}}</td>
        <td>{{user.team}}</td>
        <td>{{user.role_name}}</td>
        <td>{{user.status}}</td>
        <td>
          <div *ngFor="let permission of user.permissions">
            {{permission?.permission}}
          </div>
        </td>
        <td>
          <button pButton type="button" icon="pi pi-pencil" (click)="updateAgent(user)"
            *ngIf="user.role_name != 'super_admin'" class="m-1 p-button-sm p-button-warning"></button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>