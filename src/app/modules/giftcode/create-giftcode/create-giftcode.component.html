<div class="container">
    <div class="d-flex justify-content-between align-items-center">
        <h2>Create GiftCode</h2>
        <div>
            <button class="btn btn-dark" (click)="goBack()">Back</button>
        </div>
    </div>
    <hr>
    <form [formGroup]="insertForm" (ngSubmit)='insertRow(insertForm)'>
        <div class="row mx-0">
            <div class="col-lg-4 col-md-6 col-12 my-3">
                <label for="">Code</label>
                <input type="text" pInputText ngClass="w-100" formControlName='code'/>
                <small class="text-danger ms-1" *ngIf="insertForm.get('code')?.touched &&
                insertForm.get('code')?.hasError('required')">This field is required.</small>
            </div>
            <div class="col-lg-4 col-md-6 col-12 my-3">
                <label for="">Percentage</label>
                <input type="text" pInputText ngClass="w-100" formControlName='percentage' maxlength="3"
                oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1');"/>
                <small class="text-danger ms-1" *ngIf="insertForm.get('percentage')?.touched &&
                insertForm.get('percentage')?.hasError('required')">This field is required.</small>
            </div>
            <div class="col-lg-4 col-md-6 col-12 my-3">
                <label for="">no_of_use</label>
                <input type="text" pInputText ngClass="w-100" formControlName='no_of_use' maxlength="10"
                oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1');"/>
                <small class="text-danger ms-1" *ngIf="insertForm.get('no_of_use')?.touched &&
                insertForm.get('no_of_use')?.hasError('required')">This field is required.</small>
            </div>
            <div class="col-lg-4 col-md-6 col-12 my-3">
                <label for="">Status</label>
                <p-dropdown [options]="status" formControlName='status' appendTo="body"
                    styleClass="w-100" placeholder="Select Branch" [filter]="true">
                </p-dropdown>
                <small class="text-danger ms-1" *ngIf="insertForm.get('status')?.touched &&
                insertForm.get('status')?.hasError('required')">This field is required.</small>
            </div>
            <div class="col-lg-4 col-md-6 col-12 my-3">
                <label for="">Flag</label>
                <p-multiSelect [options]="flag" appendTo="body" defaultLabel="Select Flag" styleClass="w-100" display="chip" formControlName='flag'>
                </p-multiSelect>
                <small class="text-danger ms-1" *ngIf="insertForm.get('flag')?.touched &&
                insertForm.get('flag')?.hasError('required')">This field is required.</small>
            </div>
            <div class="col-lg-4 col-md-6 col-12 my-3">
                <label for="">Expired_at</label>
                <p-calendar [readonlyInput]="true" ngClass="w-100" appendTo="body" formControlName='expired_at'></p-calendar>
                <small class="text-danger ms-1" *ngIf="insertForm.get('expired_at')?.touched &&
                insertForm.get('expired_at')?.hasError('required')">This field is required.</small>
            </div>
            <div class="col-12 pr-1">
                <label class="mb-2">Programs</label>
                <div class="d-flex flex-wrap">
                    <div class="field-checkbox m-2" *ngFor="let program of programs">
                        <p-checkbox [name]="program.name" [value]="program.id" [inputId]="program.name" 
                        (onChange)="onCheckboxChange($event,program.id)"></p-checkbox>
                        <label class="mx-2" [for]="program.name">{{program.name}}</label>
                    </div>
                </div>
              </div>
            <div class="col-12 my-3">
                <button class="btn btn-success w-100">Create GiftCode</button>
            </div>
        </div>
    </form>
</div>