<div class="card">
    <p-table [value]="users" [lazy]="true" [showCurrentPageReport]="true" responsiveLayout="scroll">
        <ng-template pTemplate="header">
            <tr>
                <th class="text-center">
                    Email
                </th>
                <th class="text-center">
                    Models
                </th>
                <th class="text-center">Actions</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-user>
            <tr>
                <td class="text-center">
                    {{ user.email }}
                </td>
                <td class="text-center">
                    <div  *ngFor="let model of user.models;let i = index">
                        <div>
                            {{i+1}}- {{ model }}
                        </div>
                    </div>
                </td>
                <td class="text-center">
                    <button pButton type="button" (click)="displayModal(user.email,user.models)" icon="pi pi-plus" class="m-1 p-button-sm p-button-success"></button>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>

<p-dialog header="Mail Models" [(visible)]="updateModal" [modal]="true" [style]="{width: '50vw'}"
    [draggable]="false" [resizable]="false">
    <div class="container">
            <label for="">Models</label>
            <p-multiSelect [options]="models" appendTo="body"
                defaultLabel="Select Models" styleClass="w-100" display="chip" [(ngModel)]="currentModels">
            </p-multiSelect>
    </div>
    <ng-template pTemplate="footer">
        <button class="btn btn-secondary" (click)="update(currentModels)">
            Update
        </button>
    </ng-template>
</p-dialog>